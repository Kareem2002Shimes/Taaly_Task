(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[198],{6198:function(e,s,a){Promise.resolve().then(a.bind(a,8176)),Promise.resolve().then(a.t.bind(a,1749,23))},8176:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return C}});var r=a(7437),t=a(9531),n=e=>{let{slug:s}=e,a=()=>[{label:"email",name:"email",type:"email",placeholder:"Example@mail.com",autoFocus:!0},{label:"password",name:"password",placeholder:"6+ strong characters",type:"password"}],r=()=>[{label:"Email",name:"email",type:"email",placeholder:"Example@mail.com"},{label:"Password",name:"password",type:"password",placeholder:"6+ strong characters"},{label:"Confirm Password",name:"confirm_password",type:"password",placeholder:"6+ strong characters"}],n=()=>[{label:"Email",name:"email",type:"text",autoFocus:!0}],o=()=>[{label:"Password",name:"password",type:"password",autoFocus:!0},{label:"Confirm Password",name:"confirm_password",type:"password"}];return{getFormFields:()=>{switch(s){case t.iY.LOGIN:return a();case t.iY.SIGNUP:return r();case t.iY.FORGOT_PASSWORD:return n();case t.iY.RESET_PASSWORD:return o();case t.iY.PROFILE_DETAILS:return r();default:return[]}}}},o=a(248);let l={email:o.Z_().trim().min(1,{message:"Email is required"}).email({message:"Must be a valid email"}),password:o.Z_().min(6,{message:"Password must be at least 6 characters"}).max(40),confirm_password:o.Z_().min(6,{message:"Confirm Password is required"})},i=o.Ry({email:o.Z_().trim().min(1,{message:"Email is required"}).email({message:"Must be a valid email"}),password:o.Z_().min(6,{message:"Password must be at least 6 characters"}).max(40)}),c=o.Ry(l).refine(e=>e.password===e.confirm_password,{message:"Password do not match",path:["confirm_password"]}),u=o.Ry({userId:o.Z_().optional(),password:o.Z_().min(8,{message:"Password must be at least 8 characters"}).max(40),confirm_password:o.Z_().min(8,{message:"Confirm Password is required"})}).refine(e=>e.password===e.confirm_password,{message:"Password do not match",path:["confirm_password"]});o.Ry({userId:o.Z_(),code:o.Z_().min(4,{message:"Please enter 4 digits"})});let m=o.Ry({email:o.Z_().trim().min(1,{message:"Email is required"}).email({message:"Must be a valid email"})}),d=o.Ry({first_name:o.Z_().trim().min(1,{message:"First Name is required"}).optional(),last_name:o.Z_().trim().min(1,{message:"Last Name is required"}).optional(),email:o.Z_().trim().min(1,{message:"Email is required"}).email({message:"Must be a valid email"}),password:o.Z_().optional(),confirm_password:o.Z_().optional()}).refine(e=>e.password===e.confirm_password,{message:"Password do not match",path:["confirm_password"]});var p=e=>{let{slug:s}=e;return{getValidationSchema:()=>{switch(s){case t.iY.LOGIN:return i;case t.iY.SIGNUP:return c;case t.iY.RESET_PASSWORD:return u;case t.iY.PROFILE_DETAILS:return d;case t.iY.FORGOT_PASSWORD:return m;default:return o.Ry({})}}}},E=a(1270),h=a(2670),S=e=>{let{label:s,name:a,type:t,placeholder:n,disabled:o,autoFocus:l,control:i,errors:c}=e;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("label",{htmlFor:a,className:"custom-label-filed",children:s}),(0,r.jsx)(h.Qr,{control:i,name:a,render:e=>{let{field:s}=e;return(0,r.jsx)("input",{className:"custom-input-field ".concat(c[a]?"hover:!border-red-400 focus:!border-red-500":""),type:t,...s,placeholder:n,disabled:o,autoFocus:l,name:a,id:a})}}),(0,r.jsx)("p",{className:"mt-4 text-left text-sm ".concat(c[a]?"text-red-500":""),children:c[a]&&c[a].message})]})},f=a(2265);let R={showPassword:!1};var w=e=>{let{label:s,name:a,placeholder:t,disabled:n,autoFocus:o,control:l,errors:i}=e,[c,u]=(0,f.useState)(R),{showPassword:m}=c;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("label",{htmlFor:a,className:"custom-label-filed",children:s}),(0,r.jsxs)("div",{className:"relative flex items-center",children:[(0,r.jsx)(h.Qr,{control:l,name:a,render:e=>{let{field:s}=e;return(0,r.jsx)("input",{type:m?"text":"password",...s,placeholder:t,disabled:n,autoFocus:o,autoComplete:"off",name:a,id:a,className:"custom-input-field ".concat(i[a]?"hover:!border-red-400 focus:!border-red-500 ":"")})}}),(0,r.jsx)("button",{type:"button",onClick:()=>u(e=>({...e,showPassword:!e.showPassword})),onMouseDown:e=>{e.preventDefault()},className:"element-center text-accent absolute right-4 h-7 w-7 rounded-full transition-colors duration-200 hover:bg-slate-200 dark:hover:bg-slate-700"})]}),(0,r.jsx)("p",{className:"mt-4 text-left text-sm ".concat(i[a]?"text-red-500":""),children:i[a]&&i[a].message})]})},T=e=>{let{label:s,name:a,disabled:t,errors:n,control:o}=e;return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("label",{htmlFor:a,className:"label cursor-pointer gap-3 p-0 ",children:[(0,r.jsx)(h.Qr,{control:o,name:a,render:e=>{let{field:s}=e;return(0,r.jsx)("input",{type:"checkbox",disabled:t,...s,name:a,id:a,className:"checkbox-primary checkbox h-5 w-5 rounded-md"})}}),(0,r.jsx)("span",{children:s})]})})},g=e=>{let{type:s}=e;return(0,r.jsx)(r.Fragment,{children:s===t.oP.EMAIL||s===t.oP.TEXT?(0,r.jsx)(S,{...e}):s===t.oP.PASSWORD?(0,r.jsx)(w,{...e}):s===t.oP.CHECKBOX?(0,r.jsx)(T,{...e}):null})},P=a(8792),O=a(7907),_=a(4283),x=a(7780),I=a(8009),N=a(4014),b=a(146),A=a(8121),C=()=>{let{login:e,register:s}=(0,N.useAuth)(),a=(0,O.useRouter)(),o=(0,O.usePathname)().split("/")[1],{getValidationSchema:l}=p({slug:o}),{getFormFields:i}=n({slug:o}),c={};for(let e of i())c[e.name]="";let{handleSubmit:u,control:m,reset:d,formState:{errors:S,isSubmitting:R}}=(0,h.cI)({resolver:(0,E.F)(l()),mode:"onChange",defaultValues:c}),w=e=>{let{slug:s,desc:a,linkText:t}=e;return(0,r.jsxs)("div",{className:"mt-6 flex items-center gap-2",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-black",children:a}),(0,r.jsx)(P.default,{href:"/".concat(s),className:"text-sm font-medium text-[#B1B0B8] hover:underline",children:t})]})},T=(0,f.useCallback)(async r=>{switch(o){case t.iY.LOGIN:let n=await e(r);(null==n?void 0:n.user)&&(d(),a.replace("/".concat(t.Z5.PROFILE)),b.Z.set("access_token",n.user.accessToken),I.ZP.success("You have been logged in successfully"));break;case t.iY.SIGNUP:let l=await s(r);if(null==l?void 0:l.user){d();let{displayName:e,email:s,emailVerified:r,phoneNumber:n,photoURL:o,uid:i}=null==l?void 0:l.user,c=(0,A.JU)(_.db,"/users/".concat(i));(0,A.pl)(c,{id:i,displayName:e,role:t.uU.USER,email:s,emailVerified:r,photoURL:o,phoneNumber:n}),a.replace("/".concat(t.Z5.PROFILE)),b.Z.set("access_token",l.user.accessToken),I.ZP.success("You have been registered successfully")}}},[]);return(0,r.jsxs)("form",{onSubmit:u(T),children:[i().map(e=>(0,r.jsx)("div",{className:"mb-3",children:(0,r.jsx)(g,{...e,control:m,errors:S})},e.name)),o===t.iY.LOGIN&&(0,r.jsx)(P.default,{href:"/".concat(t.iY.FORGOT_PASSWORD),className:"text-sm font-medium text-[#B1B0B8] hover:underline block text-center mb-4",children:"Forgot Password?"}),(0,r.jsx)("button",{className:"submit-btn element-center mx-auto ".concat(R?"bg-slate-400 ":""),type:"submit",disabled:R,children:R?(0,r.jsx)(x.Z,{color:"white",size:24,"aria-label":"Loading Spinner","data-testid":"loader"}):(()=>{switch(o){case t.iY.LOGIN:return"Login";case t.iY.SIGNUP:return"Create account";case t.iY.FORGOT_PASSWORD:return"Continue";case t.iY.VERIFY_ACCOUNT:return"Resend Verification Email";case t.iY.RESET_PASSWORD:return"Change Password";case t.iY.ENTER_OTP:return"Confirm";default:return null}})()}),(()=>{switch(o){case t.iY.LOGIN:return(0,r.jsx)(w,{slug:t.iY.SIGNUP,desc:"Donâ€™t have an account yet?",linkText:"Sign up now"});case t.iY.SIGNUP:return(0,r.jsx)(w,{slug:t.iY.LOGIN,desc:"Already have an account?",linkText:"Login"});default:return null}})()]})}},9531:function(e,s,a){"use strict";var r,t,n,o,l,i,c,u,m,d,p,E,h,S,f,R,w,T,g,P,O,_,x,I,N,b;a.d(s,{Z5:function(){return n},iY:function(){return o},oP:function(){return l},uU:function(){return h}}),(S=r||(r={})).RTL="rtl",S.LTR="ltr",(f=t||(t={})).ENGLISH="en",f.ARABIC="ar",(R=n||(n={})).ROOT="/",R.AUTH="auth",R.PROFILE="profile",R.ADMIN="admin",(w=o||(o={})).LOGIN="login",w.SIGNUP="signup",w.VERIFY_ACCOUNT="verify-account",w.FORGOT_PASSWORD="forgot-password",w.ENTER_OTP="enter-otp",w.RESET_PASSWORD="reset-password",w.LOGOUT="logout",w.USERS="users",w.PROFILE_DETAILS="details",w.MONITORING="monitoring",w.MATCHING="matching",w.REPORTING="reporting",w.ORGANIZATIONS="organizations",w.PROJECTS="projects",w.LEARNING_TRACKS="learning-tracks",w.SETTINGS="settings",w.HELP="help",w.LEARNER_PROFILE="learner-profile",(T=l||(l={})).TEXT="text",T.EMAIL="email",T.PASSWORD="password",T.NUMBER="number",T.DATE="date",T.TIME="time",T.DATE_TIME_LOCAL="datetime-local",T.CHECKBOX="checkbox",T.RADIO="radio",T.SELECT="select",T.TEXTAREA="textarea",T.FILE="file",T.IMAGE="image",T.COLOR="color",T.RANGE="range",T.TEL="tel",T.URL="url",T.SEARCH="search",T.MONTH="month",T.WEEK="week",T.HIDDEN="hidden",T.MULTI_SELECT="multi select",(g=i||(i={})).NEXT="next",g.PREV="prev",(P=c||(c={})).SUCCESS="success",P.ERROR="error",P.WARNING="warning",P.INFO="info",(O=u||(u={})).ASC="asc",O.DESC="desc",(_=m||(m={})).CREATED_AT="createdAt",_.UPDATED_AT="updatedAt",_.NAME="name",_.EMAIL="email",_.PHONE="phone",_.STATUS="status",_.START_DATE="startDate",_.END_DATE="endDate",(x=d||(d={})).LOGIN_SUCCESS="Login successfully",x.LOGOUT_SUCCESS="Logout successfully",x.REGISTER_SUCCESS="Register successfully",x.FORGET_PASSWORD_SUCCESS="Forget password successfully",x.RESET_PASSWORD_SUCCESS="Reset password successfully",(I=p||(p={})).GET="GET",I.POST="POST",I.PUT="PUT",I.PATCH="PATCH",I.DELETE="DELETE",(N=E||(E={})).PROD="production",N.DEV="development",(b=h||(h={})).USER="user",b.ADMIN="admin"},4283:function(e,s,a){"use strict";a.d(s,{I:function(){return l},db:function(){return i}});var r=a(6142),t=a(2730),n=a(8121);let o=(0,r.C6)().length?(0,r.Mq)():(0,r.ZF)({apiKey:"AIzaSyDS6w2HdU9Lw9V2zNhB3-j_XhUPers8EZU",authDomain:"taaly-task.firebaseapp.com",projectId:"taaly-task",storageBucket:"taaly-task.appspot.com",messagingSenderId:"590092131567",appId:"1:590092131567:web:59e4148909ff08916a0f1a",measurementId:"G-GL97HWK1C1"}),l=(0,t.v0)(o),i=(0,n.ad)()},4014:function(e,s,a){"use strict";a.r(s),a.d(s,{useAuth:function(){return d}});var r=a(7437),t=a(4283),n=a(2730),o=a(2265),l=a(8009),i=a(146),c=a(8121),u=a(7907);let m=(0,o.createContext)(null);s.default=e=>{let{children:s}=e,[a,d]=(0,o.useState)(null);(0,u.useRouter)();let p=async e=>{try{return await (0,n.e5)(t.I,e.email,e.password)}catch(e){l.ZP.error(e.message)}},E=async e=>{try{return await (0,n.Xb)(t.I,e.email,e.password)}catch(e){l.ZP.error(e.message)}};return(0,o.useEffect)(()=>{let e=(0,n.Aj)(t.I,async e=>{if(e){console.log(e);let s=(0,c.JU)(t.db,"users",e.uid),a=(await (0,c.QT)(s)).data();i.Z.set("role",a.role),d(a)}});return()=>e()},[]),(0,r.jsx)(m.Provider,{value:{user:a,logout:()=>{(0,n.w7)(t.I),i.Z.remove("access_token"),i.Z.remove("role")},login:p,register:E},children:s})};let d=()=>(0,o.useContext)(m)}}]);